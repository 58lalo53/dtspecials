DROP TABLE SPECIALS;
DROP TABLE USERS;
DROP TABLE BUSINESSES;


CREATE TABLE BUSINESSES (
bname VARCHAR(100) NOT NULL,
type VARCHAR(11) NOT NULL,
description VARCHAR(1000),
username VARCHAR(10) NOT NULL UNIQUE,
password VARCHAR(15) NOT NULL,
email VARCHAR(100) NOT NULL,
phone VARCHAR(50) NOT NULL,
street VARCHAR(50) NOT NULL,
city VARCHAR(100) NOT NULL,
state VARCHAR(20) NOT NULL,
zip VARCHAR(9) NOT NULL,
id int GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1) PRIMARY KEY
);

CREATE TABLE USERS (
email VARCHAR(50) NOT NULL,
username VARCHAR(10) NOT NULL UNIQUE,
password VARCHAR(10) NOT NULL,
id int GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1) PRIMARY KEY
);

CREATE TABLE USERPROFILES (
fname VARCHAR(50),
lname VARCHAR(50),
phone VARCHAR(12),
picture BLOB(200k),
pictype VARCHAR(30),
id int GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
user_Id INT
);

CREATE TABLE SPECIALS (
name VARCHAR(50) NOT NULL,
date DATE NOT NULL,
description VARCHAR(500),
buss_Id INT,
id int GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1) PRIMARY KEY
);

ALTER TABLE SPECIALS ADD FOREIGN KEY (buss_Id) REFERENCES BUSINESSES (id) ON DELETE CASCADE;
ALTER TABLE USERPROFILES ADD FOREIGN KEY (user_Id) REFERENCES USERS (id);